<?php

namespace App\Http\Controllers\Api\Halal;

use App\Helpers\AuthUtil;
use App\Http\Controllers\Api\Core\ApiAdminController;
use App\Models\Halal\HalalProduct;
use Illuminate\Http\Request;

class HalalProductController extends ApiAdminController
{

    public function __construct()
    {
        $this->controller_name = strtolower( str_replace('Controller', '', get_class()) );
        $this->model = new HalalProduct();

        $this->res_path = 'models/db/halal'; // under resources ,ie: resources/models
        $this->yml_file = 'halal_product'; // name of yml ,ie: member.yml
        $this->entity = 'halalproduct';

    }

    public function additionalQuery($model, Request $request)
    {
        $rolename = AuthUtil::getRoleSlug( $this->auth->roleId );

        if($rolename == 'owner'){
            $model = $model->where('ownerId', '=', $this->auth->_id);
        }

        return parent::additionalQuery($model, $request); // TODO: Change the autogenerated stub
    }


    public function beforeOutput($data)
    {
        //$data['addOut'] = "ADD BEFORE OUTPUT";
        return parent::beforeOutput($data); // TODO: Change the autogenerated stub
    }


    public function beforeSave($data)
    {
        //$data['beforeSave'] = 'BEFORE';
        return parent::beforeSave($data); // TODO: Change the autogenerated stub
    }

    public function afterSave($data)
    {
        //$data['afterSave'] = 'AFTER';
        return parent::afterSave($data); // TODO: Change the autogenerated stub
    }


}
